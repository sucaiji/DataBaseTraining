<!DOCTYPE HTML>
<html>
<head>
    <link href="css/style.css" type="text/css" rel="stylesheet">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
</head>
<body>
<b><p>转自http://yinxiangbing.iteye.com/blog/673768</p>
</b><strong>1 定义&nbsp;</strong><br/>&nbsp;&nbsp;&nbsp;
数据完整性用于保证数据库中数据的正确性、一致性和可靠性。&nbsp;<br/><strong>2 &nbsp;&nbsp; 类型&nbsp;</strong><br/>· 实体完整性(Entity
Integrity)&nbsp;<br/>· 域完整性(Domain Integrity)&nbsp;<br/>· 参照完整性(Referential Integrity)&nbsp;<br/>·
用户定义完整性(User-defined Integrity)&nbsp;<br/>· 图示&nbsp;<br/><br/><strong>实体完整性（Entity
    Integrity）&nbsp;</strong><br/>
<p>实体完整性用于保证<a href="http://lib.csdn.net/base/mysql" class="replace_word" title="MySQL知识库"
               target="_blank">数据库</a>中数据表的每一个特定实体的记录都是唯一的 。
</p>
<table class="dataintable">
    <tbody>
    <tr>
        <th>约束种类</th>
        <th>功能描述</th>
    </tr>
    <tr>
        <td>PRIMARY KEY(主键)约束</td>
        <td>唯一识别每一条记录的标志，可以有多列共同组成</td>
    </tr>
    <tr>
        <td>IDENTITY(自增)约束</td>
        <td>列值自增，一般使用此属性设置的列作为主键</td>
    </tr>
    <tr>
        <td>UNIQUE(唯一)约束</td>
        <td>可以使用UNIQUE约束确保在非主键列中不存在重复值，但列值可以是NULL(空)</td>
    </tr>

    </tbody>
</table>
</p><strong>域完整性（Domain Integrity）&nbsp;</strong><br/>
<p>域完整性是指保证指定列的数据具有正确的数据类型、格式和有效的数据范围。&nbsp;</p>
<table class="dataintable">
    <tbody>
    <tr>
        <td>CHECK(检查)约束</td>
        <td>用于限制列中值得范围</td>
    </tr>
    <tr>
        <td>FOREIGN KEY(外键)</td>
        <td>一个表中的FORENIGN KEY 指向另一个表中的PRIMARY KEY</td>
    </tr>
    <tr>
        <td>DEFAULT(默认值)约束</td>
        <td>用于向列中插入默认值</td>
    </tr>
    <tr>
        <td>NOT NULL(非空)约束</td>
        <td>用于强制列不接受NULL(空)值</td>
    </tr>

    </tbody>
</table>

<strong>参照完整性（Referential Integrity）&nbsp;</strong><br/>当增加、修改或删除数据库表中记录时，可以借助参照完整性来保证相关联表之间数据的一致性 。<br/><strong>用户定义完整性
    （User- defined Integrity）&nbsp;</strong><br/>
<p>这是由用户定义的完整性。用户定义完整性可以定义不属于其他任何完整性分类的特定业务规则 。</p>
<p><strong>注意：</strong><br/>1、PRIMARY KEY用于将表中的某类设置为主键，一张表中只有一个主键，主键可以是一列或由多列组成。<br/>2、NOT
    NULL是对列值进行限制，即在表中添加数据时不允许有NULL值。<br/>3、CHECK约束的语法规则：CHECK(表达式)<br/>外键的使用：字段名 数据类型 [FOREIGN KEY]
    REFERENCES 表名(字段名)&nbsp;<br/>
</p>
<p>============================</p>
<br/>PRIMARY KEY 约束&nbsp;<br/>PRIMARY
KEY约束用于定义基本表的主键，它是惟一确定表中每一条记录的标识符，其值不能为NULL，也不能重复，以此来保证实体的完整性。PRIMARY
KEY与UNIQUE约束类似，通过建立唯一索引来保证基本表在主键列取值的唯一性，但它们之间存在着很大的区别：&nbsp;<br/>①一个表只能有一个 PRIMARY KEY 约束
，但可定义多个UNIQUE约束；&nbsp;<br/>②对于指定为PRIMARY KEY的一个列或多个列的组合，其中任何一个列都不能出现空值，而对于UNIQUE所约束的唯一键，则允许为空。&nbsp;<br/>注意：不能为同一个列或一组列既定义UNIQUE约束，又定义PRIMARY
KEY约束；&nbsp;<br/>PRIMARY
KEY既可用于列约束，也可用于表约束。&nbsp;<br/>

<br/>UNIQUE约束&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
惟一性约束用于指定一个或者多个列的组合值具有惟一性，以防止在列中输入重复的值。定义了UNIQUE约束的那些列称为唯一键，系统自动为唯一键建立唯一索引，从而保证了唯一键的唯一性。&nbsp;<br/>当使用惟一性约束时，需要考虑以下几个因素：&nbsp;<br/>·
使用惟一性约束的字段允许为空值；&nbsp;<br/>· 一个表中可以允许有多个惟一性约束；&nbsp;<br/>· 可以把惟一性约束定义在多个字段上；&nbsp;<br/>·
惟一性约束用于强制在指定字段上创建一个惟一性索引；&nbsp;<br/>· 默认情况下，创建的索引类型为非聚集索引。&nbsp;<br/>

<br/>CHECK 约束&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
检查约束对输入列或者整个表中的值设置检查条件，以限制输入值，保证数据库数据的完整性。&nbsp;<br/>当使用检查约束时，应该考虑和注意以下几点：&nbsp;<br/>·
一个列级检查约束只能与限制的字段有关；一个表级检查约束只能与限制的表中字段有关；&nbsp;<br/>· 一个表中可以定义多个检查约束；&nbsp;<br/>· 每个CREATE
TABLE语句中每个字段只能定义一个检查约束；&nbsp;<br/>· 在多个字段上定义检查约束，则必须将检查约束定义为表级约束；&nbsp;<br/>·
当执行INSERT语句或者UPDATE语句时，检查约束将验证数据；&nbsp;<br/>· 检查约束中不能包含子查询。&nbsp;<br/>

<br/>DEFAULT 约束&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
默认约束指定在插入操作中如果没有提供输入值时，则系统自动指定值。默认约束可以包括常量、函数、不带变元的内建函数或者空值。&nbsp;<br/>使用默认约束时，应该注意以下几点：&nbsp;<br/>（1）每个字段只能定义一个默认约束；&nbsp;<br/>（2）如果定义的默认值长于其对应字段的允许长度，那么输入到表中的默认值将被截断；&nbsp;<br/>（3）不能加入到带有IDENTITY属性或者数据类型为timestamp的字段上；&nbsp;<br/>（4）如果字段定义为用户定义的数据类型，而且有一个默认绑定到这个数据类型上，则不允许该字段有默认约束。&nbsp;<br/>

<br/>NULL 约束&nbsp;<br/>空值约束用来控制是否允许该字段的值为NULL。NULL值不是0也不是空白，更不是填入字符串的“NULL”字符串，而是表示“不知道”、“
不确定”或“没有数据”的意思。&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 当某一字段的值一定要输入才有意义的时候，则可以设置为NOT
NULL。如主键列就不允许出现空值，否则就失去了唯一标识一条记录的作用。空值约束只能用于定义列约束。&nbsp;<br/>FOREIGN KEY 约束&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;
FOREIGN KEY约束是用于建立和加强两个表数据之间的链接的一列或多列。外部键约束用于强制参照完整性。&nbsp;<br/><br/>FOREIGN KEY
约束确保同一个表或者不同表之间的引用完整性&nbsp;<br/>必须引用一个PRIMARY
KEY或者UNIQUE约束&nbsp;<br/>用户必须在应用表上具有REFERENCES权限&nbsp;<br/>一个表中最多可以有31个外部键约束；&nbsp;<br/>在临时表中，不能使用外部键约束；&nbsp;<br/>主键和外部键的数据类型必须严格匹配
。&nbsp;<br/><br/>
<p>=============================</p>
<p>必须会的SQL语句：数据库的完整性约束&nbsp;<br/><b>实体完整性</b></p>
<br/>
1.建表时定义主键<p></p>
<pre>Create table 表名
 (
     Sno int identity(1,1),
     Sname nvarchar(20),
     --设置主键
     Primary key (Sno)
 )</pre>

2.添加主键
<pre>
    alter table 表名
        add constraint PK_表名_Sno
            primary key(id)
</pre>
<p>&nbsp;&nbsp;&nbsp;&nbsp;参照完整性</p>
1.建表时定义外键
<pre>
    create table 表名
    (
    sno int identity(1,1) primary key,
    cno int not null,
    foreign key(cno) References 表名2(Cno)
    on Delete cascade
    --级联删除
    on update cascade
    --级联更新
    on delete on action
    --删除管制
    )
    </pre>
<p>2.添加外键</p>
<pre>
&nbsp;&nbsp; alter table 表名
&nbsp;&nbsp; add constraint FK_表名_表名2
&nbsp;&nbsp; Foreign key(cid) references 表名2(cid)
</pre>

<p><b>用户定义完整性</b></p>

<p>1.非空约束</p>
<pre>
    alter table 表名
    alter column name varchar(20) not null
</pre>

2.唯一约束
<pre>
    alter table 表名
    add constraint UQ_表名_列名 unique(列)
</pre>
3.检查约束
<pre>
    alter table 表名
        add constraint CK_表名_列名 check(age&gt;5)
</pre>

4.默认约束
<pre>
    alter table 表名
        add constraint DF_表名_列名 default('男')
            for gender
</pre>
删除约束
<pre>
    alter table 表名 drop constraint DF_表名_列
</pre>
</body>
</html>